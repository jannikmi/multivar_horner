1 181106
200 samples, no balanced sampling

Speed test:
dim   |max_deg   |setup time naive     | setup time horner    | delta      | eval time naive      | eval time horner     | delta
==============================================================================================================
1     |1         |0.006072376999999962 | 0.022797202999999988 | x -2.75    | 0.004877193999999974 | 0.000436292999999921 | x 10.18
1     |2         |0.005969007999999887 | 0.04139435100000011  | x -5.93    | 0.005641962000000111 | 0.0009398510000000471 | x 5.0
1     |3         |0.0058475179999999405 | 0.05384421600000011  | x -8.21    | 0.004661086999999897 | 0.0012438269999999196 | x 2.75
1     |4         |0.0055087310000001555 | 0.06289774000000015  | x -10.42   | 0.004619928999999967 | 0.0014487700000000991 | x 2.19

2     |1         |0.005345842999999961 | 0.025410818999999973 | x -3.75    | 0.0046578279999998085 | 0.0004623550000000254 | x 9.07
2     |2         |0.005881808999999905 | 0.08249083199999996  | x -13.02   | 0.0046175059999999934 | 0.002113871000000156 | x 1.18
2     |3         |0.006145551000000138 | 0.17097451500000016  | x -26.82   | 0.005335563000000043 | 0.0038978819999999637 | x 0.37
2     |4         |0.006089868000000109 | 0.28261049400000005  | x -45.41   | 0.004739121999999707 | 0.005681358999999997 | x -0.2

3     |1         |0.005527711999999685 | 0.02221234900000013  | x -3.02    | 0.0048066630000001   | 0.0004827640000000244 | x 8.96
3     |2         |0.005922958999999839 | 0.19544191100000008  | x -32.0    | 0.004707813000000005 | 0.003955798999999871 | x 0.19
3     |3         |0.0059196270000003715 | 0.5746691729999998   | x -96.08   | 0.008459364999999774 | 0.010248279999999887 | x -0.21
3     |4         |0.006056840000000285 | 1.272310944          | x -209.06  | 0.005328976000000374 | 0.020751950000000186 | x -2.89

4     |1         |0.005634249999999952 | 0.021578761999999863 | x -2.83    | 0.004592826000000549 | 0.00045677800000021307 | x 9.05
4     |2         |0.0059615519999995925 | 0.4194593109999998   | x -69.36   | 0.004649583000000845 | 0.007552604999999879 | x -0.62
4     |3         |0.007396796000000094 | 1.9275862350000006   | x -259.6   | 0.008114144000000323 | 0.030875932000000716 | x -2.81
4     |4         |0.008115240999998719 | 6.041835165          | x -743.5   | 0.008076729999999088 | 0.08966923600000243  | x -10.1

5     |1         |0.005883816000000763 | 0.03200009700000095  | x -4.44    | 0.004808247999999793 | 0.0006838929999979371 | x 6.03
5     |2         |0.008640898999999536 | 1.0937390590000007   | x -125.58  | 0.005891999999999342 | 0.015147867999999676 | x -1.57
5     |3         |0.012383898999999587 | 7.301015155999998    | x -588.56  | 0.00919785399999995  | 0.0939403960000007   | x -9.21
5     |4         |0.011325520999996286 | 34.635227128         | x -3057.16 | 0.021700003999995943 | 0.36359363200000416  | x -15.76

6     |1         |0.006347906999991437 | 0.024155003999993596 | x -2.81    | 0.005466039000012302 | 0.0004979689999942138 | x 9.98
6     |2         |0.0062681080000004386 | 2.0483476990000042   | x -325.79  | 0.007349310999998693 | 0.029395997000008833 | x -3.0
6     |3         |0.009726915999991093 | 25.990817520999997   | x -2671.05 | 0.018754264999984116 | 0.2850242469999955   | x -14.2
6     |4         |0.02822592999999074  | 282.673513139        | x -10013.67 | 0.09009534700004451  | 1.5866563619999852   | x -16.61



2 181106
200 samples, no recipe, balanced sampling


Speed test:
dim | max_deg | setup time naive | setup time horner | delta           | eval time naive  | eval time horner | delta
==============================================================================================================
1   | 1       | 0.00622          | 0.04841           | 6.78 x slower   | 0.006153         | 0.001732         | 2.55 x faster
1   | 2       | 0.006022         | 0.0734            | 11.19 x slower  | 0.004771         | 0.002022         | 1.36 x faster
1   | 3       | 0.006257         | 0.09642           | 14.41 x slower  | 0.004585         | 0.002262         | 1.03 x faster
1   | 4       | 0.006194         | 0.1158            | 17.7 x slower   | 0.004568         | 0.002986         | 0.53 x faster
1   | 5       | 0.006022         | 0.131             | 20.75 x slower  | 0.004583         | 0.002962         | 0.55 x faster

2   | 1       | 0.006129         | 0.09514           | 14.52 x slower  | 0.004585         | 0.002052         | 1.23 x faster
2   | 2       | 0.005939         | 0.1912            | 31.2 x slower   | 0.004729         | 0.004197         | 0.13 x faster
2   | 3       | 0.008298         | 0.3328            | 39.11 x slower  | 0.005254         | 0.006294         | 0.2 x slower
2   | 4       | 0.006953         | 0.4739            | 67.16 x slower  | 0.004899         | 0.00825          | 0.68 x slower
2   | 5       | 0.006828         | 0.6677            | 96.78 x slower  | 0.005224         | 0.01136          | 1.17 x slower

3   | 1       | 0.006767         | 0.157             | 22.2 x slower   | 0.004821         | 0.003193         | 0.51 x faster
3   | 2       | 0.00675          | 0.4765            | 69.59 x slower  | 0.006041         | 0.008259         | 0.37 x slower
3   | 3       | 0.007002         | 1.2898            | 183.2 x slower  | 0.00728          | 0.02041          | 1.8 x slower
3   | 4       | 0.008061         | 2.6558            | 328.47 x slower | 0.006417         | 0.03762          | 4.86 x slower
3   | 5       | 0.009512         | 4.4512            | 466.97 x slower | 0.006484         | 0.06223          | 8.6 x slower

4   | 1       | 0.009423         | 0.3246            | 33.45 x slower  | 0.004739         | 0.005636         | 0.19 x slower
4   | 2       | 0.00678          | 1.5395            | 226.08 x slower | 0.005323         | 0.02234          | 3.2 x slower
4   | 3       | 0.008577         | 5.6327            | 655.7 x slower  | 0.00757          | 0.07694          | 9.16 x slower
4   | 4       | 0.01283          | 14.8254           | 1154.1 x slower | 0.01061          | 0.1639           | 14.44 x slower
4   | 5       | 0.02027          | 35.5908           | 1755.06 x slower | 0.0181           | 0.3505           | 18.36 x slower

5   | 1       | 0.02805          | 0.6066            | 20.63 x slower  | 0.005352         | 0.009304         | 0.74 x slower
5   | 2       | 0.008458         | 5.2761            | 622.81 x slower | 0.008469         | 0.06944          | 7.2 x slower
5   | 3       | 0.01437          | 24.9405           | 1734.21 x slower | 0.01623          | 0.2594           | 14.98 x slower
5   | 4       | 0.03362          | 121.1635          | 3602.39 x slower | 0.04438          | 0.8292           | 17.68 x slower
5   | 5       | 0.09394          | 511.9315          | 5448.77 x slower | 0.1064           | 2.1227           | 18.95 x slower


3 181107
200 samples, recipe, balanced sampling

Speed test:
dim | max_deg | setup time naive | setup time horner | delta           | eval time naive  | eval time horner | delta
========================================================================================================================
1   | 1       | 0.00785          | 0.07179           | 8.15 x slower   | 0.006666         | 0.0005629        | 10.84 x faster
1   | 2       | 0.006604         | 0.09313           | 13.1 x slower   | 0.004894         | 0.001355         | 2.61 x faster
1   | 3       | 0.006387         | 0.1058            | 15.57 x slower  | 0.005732         | 0.001483         | 2.87 x faster
1   | 4       | 0.006098         | 0.1287            | 20.11 x slower  | 0.004786         | 0.0005783        | 7.28 x faster
1   | 5       | 0.005829         | 0.1556            | 25.69 x slower  | 0.004595         | 0.0005708        | 7.05 x faster

2   | 1       | 0.006489         | 0.1108            | 16.08 x slower  | 0.0051           | 0.0005486        | 8.3 x faster
2   | 2       | 0.00623          | 0.208             | 32.38 x slower  | 0.005042         | 0.0005942        | 7.49 x faster
2   | 3       | 0.006678         | 0.355             | 52.16 x slower  | 0.005281         | 0.0006158        | 7.58 x faster
2   | 4       | 0.007218         | 0.5576            | 76.25 x slower  | 0.005134         | 0.00152          | 2.38 x faster
2   | 5       | 0.006587         | 0.8132            | 122.46 x slower | 0.004967         | 0.0006353        | 6.82 x faster

3   | 1       | 0.007089         | 0.1882            | 25.54 x slower  | 0.00492          | 0.0006065        | 7.11 x faster
3   | 2       | 0.01074          | 0.5712            | 52.2 x slower   | 0.006016         | 0.0006366        | 8.45 x faster
3   | 3       | 0.007228         | 1.413             | 194.48 x slower | 0.00596          | 0.0007277        | 7.19 x faster
3   | 4       | 0.009481         | 2.6459            | 278.07 x slower | 0.008227         | 0.0008854        | 8.29 x faster
3   | 5       | 0.006938         | 4.6333            | 666.78 x slower | 0.006477         | 0.0007996        | 7.1 x faster

4   | 1       | 0.00696          | 0.3442            | 48.45 x slower  | 0.00511          | 0.0005747        | 7.89 x faster
4   | 2       | 0.007323         | 1.7209            | 234.01 x slower | 0.005648         | 0.0006373        | 7.86 x faster
4   | 3       | 0.007461         | 5.8445            | 782.32 x slower | 0.007694         | 0.0008339        | 8.23 x faster
4   | 4       | 0.00915          | 14.9916           | 1637.48 x slower | 0.01104          | 0.001382         | 6.99 x faster
4   | 5       | 0.01226          | 42.1729           | 3438.99 x slower | 0.01956          | 0.0013           | 14.04 x faster

5   | 1       | 0.01055          | 0.7011            | 65.48 x slower  | 0.007195         | 0.0008818        | 7.16 x faster
5   | 2       | 0.008262         | 5.8852            | 711.36 x slower | 0.008219         | 0.001278         | 5.43 x faster
5   | 3       | 0.01174          | 27.6392           | 2352.77 x slower | 0.0167           | 0.001549         | 9.77 x faster
5   | 4       | 0.02007          | 127.7196          | 6361.92 x slower | 0.04309          | 0.002111         | 19.41 x faster


4 181107
compiled tree factorisation

Speed test:
testing 200 evenly distributed random polynomials

  parameters  |  setup time                             |  eval time                           |  num ops
dim | max_deg | naive      | horner     | delta         | naive      | horner     | delta      | naive      | horner     | delta
==========================================================================================================================================
1   | 1       | 0.006153   | 0.05864    | 8.5 x more    | 0.004967   | 0.0006396  | 6.8 x less | 3          | 2          | 0.5 x less
1   | 2       | 0.006386   | 0.08955    | 13 x more     | 0.004756   | 0.0008069  | 4.9 x less | 5          | 4          | 0.2 x less
1   | 3       | 0.006735   | 0.1185     | 17 x more     | 0.005551   | 0.0006573  | 7.4 x less | 7          | 6          | 0.2 x less
1   | 4       | 0.006258   | 0.1406     | 22 x more     | 0.004492   | 0.0007     | 5.4 x less | 8          | 7          | 0.1 x less
1   | 5       | 0.005953   | 0.1649     | 27 x more     | 0.004742   | 0.0006603  | 6.2 x less | 10         | 9          | 0.1 x less

2   | 1       | 0.006292   | 0.1097     | 16 x more     | 0.005293   | 0.0006787  | 6.8 x less | 12         | 5          | 1.4 x less
2   | 2       | 0.006381   | 0.2305     | 35 x more     | 0.005293   | 0.001388   | 2.8 x less | 25         | 13         | 0.9 x less
2   | 3       | 0.006272   | 0.3543     | 56 x more     | 0.004791   | 0.0006813  | 6.0 x less | 40         | 22         | 0.8 x less
2   | 4       | 0.00674    | 0.5895     | 86 x more     | 0.004993   | 0.0007105  | 6.0 x less | 65         | 34         | 0.9 x less
2   | 5       | 0.006582   | 0.8375     | 126 x more    | 0.004908   | 0.0007158  | 5.9 x less | 97         | 49         | 1.0 x less

3   | 1       | 0.006446   | 0.1865     | 28 x more     | 0.004606   | 0.001141   | 3.0 x less | 31         | 11         | 1.8 x less
3   | 2       | 0.007061   | 0.613      | 86 x more     | 0.005162   | 0.0006943  | 6.4 x less | 102        | 36         | 1.8 x less
3   | 3       | 0.006637   | 1.3458     | 202 x more    | 0.00551    | 0.0007766  | 6.1 x less | 224        | 78         | 1.9 x less
3   | 4       | 0.008236   | 2.7841     | 337 x more    | 0.00724    | 0.0008139  | 7.9 x less | 439        | 147        | 2.0 x less
3   | 5       | 0.007596   | 4.7555     | 625 x more    | 0.006766   | 0.0008553  | 6.9 x less | 764        | 250        | 2.1 x less

4   | 1       | 0.01033    | 0.3468     | 33 x more     | 0.006812   | 0.0007691  | 7.9 x less | 74         | 20         | 2.7 x less
4   | 2       | 0.007027   | 1.7577     | 249 x more    | 0.005877   | 0.000784   | 6.5 x less | 376        | 98         | 2.8 x less
4   | 3       | 0.007825   | 5.5723     | 711 x more    | 0.01       | 0.000992   | 9.1 x less | 1177       | 296        | 3.0 x less
4   | 4       | 0.009156   | 13.5034    | 1474 x more   | 0.0112     | 0.0009962  | 10 x less  | 2730       | 680        | 3.0 x less
4   | 5       | 0.0119     | 29.5182    | 2480 x more   | 0.01833    | 0.001801   | 9.2 x less | 5855       | 1427       | 3.1 x less

5   | 1       | 0.006787   | 0.6741     | 98 x more     | 0.005069   | 0.001401   | 2.6 x less | 180        | 39         | 3.6 x less
5   | 2       | 0.008153   | 5.3537     | 656 x more    | 0.007833   | 0.0009047  | 7.7 x less | 1379       | 282        | 3.9 x less
5   | 3       | 0.01127    | 21.6609    | 1920 x more   | 0.01733    | 0.001344   | 12 x less  | 5400       | 1092       | 3.9 x less
5   | 4       | 0.02088    | 75.2917    | 3605 x more   | 0.04824    | 0.002342   | 20 x less  | 18003      | 3553       | 4.1 x less
5   | 5       | 0.04262    | 192.5815   | 4517 x more   | 0.1008     | 0.00429    | 22 x less  | 43013      | 8474       | 4.1 x less


5 + lucrativity


Speed test:
testing 200 evenly distributed random polynomials

 parameters   |  setup time                             |  eval time                           |  num ops                             |
dim | max_deg | naive      | horner     | delta         | naive      | horner     | delta      | naive      | horner     | delta      | lucrative after # evals
================================================================================================================================================================
1   | 1       | 0.006305   | 0.06363    | 9.1 x more    | 0.005221   | 0.000898   | 4.8 x less | 3          | 2          | 0.5 x less | 13
1   | 2       | 0.007318   | 0.09933    | 13 x more     | 0.005461   | 0.001508   | 2.6 x less | 5          | 4          | 0.2 x less | 23
1   | 3       | 0.007114   | 0.1177     | 16 x more     | 0.005212   | 0.0006878  | 6.6 x less | 7          | 6          | 0.2 x less | 24
1   | 4       | 0.007538   | 0.1375     | 17 x more     | 0.005691   | 0.00068    | 7.4 x less | 8          | 7          | 0.1 x less | 26
1   | 5       | 0.006581   | 0.1604     | 23 x more     | 0.004997   | 0.0006706  | 6.5 x less | 9          | 8          | 0.1 x less | 36

2   | 1       | 0.009521   | 0.1202     | 12 x more     | 0.006585   | 0.000716   | 8.2 x less | 11         | 6          | 0.8 x less | 19
2   | 2       | 0.007136   | 0.2279     | 31 x more     | 0.005337   | 0.001005   | 4.3 x less | 23         | 12         | 0.9 x less | 51
2   | 3       | 0.007257   | 0.4176     | 56 x more     | 0.005411   | 0.0007577  | 6.1 x less | 46         | 24         | 0.9 x less | 88
2   | 4       | 0.007601   | 0.6086     | 79 x more     | 0.005247   | 0.0007237  | 6.2 x less | 67         | 35         | 0.9 x less | 133
2   | 5       | 0.007768   | 0.8454     | 108 x more    | 0.005715   | 0.0008374  | 5.8 x less | 92         | 47         | 1.0 x less | 172

3   | 1       | 0.008794   | 0.2048     | 22 x more     | 0.005145   | 0.0007152  | 6.2 x less | 31         | 11         | 1.8 x less | 44
3   | 2       | 0.007285   | 0.5924     | 80 x more     | 0.005611   | 0.0007129  | 6.9 x less | 92         | 33         | 1.8 x less | 119
3   | 3       | 0.007085   | 1.4304     | 201 x more    | 0.0056     | 0.0007854  | 6.1 x less | 216        | 75         | 1.9 x less | 296
3   | 4       | 0.007445   | 3.0205     | 405 x more    | 0.006262   | 0.0008511  | 6.4 x less | 465        | 154        | 2.0 x less | 557
3   | 5       | 0.008323   | 5.018      | 602 x more    | 0.008751   | 0.0008714  | 9.0 x less | 773        | 253        | 2.1 x less | 636

4   | 1       | 0.007914   | 0.3799     | 47 x more     | 0.005358   | 0.0006964  | 6.7 x less | 79         | 21         | 2.8 x less | 80
4   | 2       | 0.007227   | 1.6436     | 226 x more    | 0.005898   | 0.0008143  | 6.2 x less | 343        | 91         | 2.8 x less | 322
4   | 3       | 0.00771    | 5.4905     | 711 x more    | 0.007609   | 0.00127    | 5.0 x less | 1096       | 279        | 2.9 x less | 865
4   | 4       | 0.01102    | 15.0679    | 1366 x more   | 0.01205    | 0.001552   | 6.8 x less | 2973       | 729        | 3.1 x less | 1434
4   | 5       | 0.01273    | 30.092     | 2362 x more   | 0.01963    | 0.00132    | 14 x less  | 5718       | 1404       | 3.1 x less | 1643

5   | 1       | 0.007336   | 0.7372     | 100 x more    | 0.00617    | 0.0007456  | 7.3 x less | 189        | 41         | 3.6 x less | 135
5   | 2       | 0.00885    | 5.3898     | 608 x more    | 0.008663   | 0.001077   | 7.0 x less | 1351       | 277        | 3.9 x less | 709
5   | 3       | 0.01994    | 23.8338    | 1194 x more   | 0.01824    | 0.001478   | 11 x less  | 5671       | 1140       | 4.0 x less | 1421
5   | 4       | 0.02191    | 74.6273    | 3405 x more   | 0.04694    | 0.002129   | 21 x less  | 16783      | 3355       | 4.0 x less | 1665
5   | 5       | 0.04557    | 210.599    | 4621 x more   | 0.1141     | 0.004512   | 24 x less  | 44909      | 8807       | 4.1 x less | 1921


6 turn debug off

 parameters   |  setup time                             |  eval time                           |  num ops                             | lucrative after
dim | max_deg | naive      | horner     | delta         | naive      | horner     | delta      | naive      | horner     | delta      | # evals
================================================================================================================================================================
1   | 1       | 0.005892   | 0.06047    | 9.3 x more    | 0.004712   | 0.0006059  | 6.8 x less | 4          | 2          | 1.0 x less | 13
1   | 2       | 0.005843   | 0.08022    | 13 x more     | 0.004772   | 0.0007251  | 5.6 x less | 5          | 4          | 0.2 x less | 18
1   | 3       | 0.006712   | 0.1014     | 14 x more     | 0.004644   | 0.0006409  | 6.2 x less | 7          | 6          | 0.2 x less | 24
1   | 4       | 0.006179   | 0.1375     | 21 x more     | 0.004477   | 0.0007467  | 5.0 x less | 8          | 7          | 0.1 x less | 35
1   | 5       | 0.006059   | 0.1432     | 23 x more     | 0.004627   | 0.0006215  | 6.4 x less | 9          | 9          | 0.0 x more | 34

2   | 1       | 0.007445   | 0.1129     | 14 x more     | 0.00638    | 0.0006415  | 8.9 x less | 12         | 5          | 1.4 x less | 18
2   | 2       | 0.006407   | 0.2159     | 33 x more     | 0.004935   | 0.0006426  | 6.7 x less | 24         | 13         | 0.8 x less | 49
2   | 3       | 0.006468   | 0.3441     | 52 x more     | 0.004673   | 0.001437   | 2.3 x less | 43         | 23         | 0.9 x less | 104
2   | 4       | 0.006288   | 0.5189     | 82 x more     | 0.004837   | 0.0007046  | 5.9 x less | 63         | 33         | 0.9 x less | 124
2   | 5       | 0.006339   | 0.781      | 122 x more    | 0.004598   | 0.0006951  | 5.6 x less | 95         | 48         | 1.0 x less | 198

3   | 1       | 0.006838   | 0.1746     | 24 x more     | 0.005002   | 0.000662   | 6.6 x less | 30         | 11         | 1.7 x less | 39
3   | 2       | 0.00725    | 0.5564     | 76 x more     | 0.005399   | 0.0007045  | 6.7 x less | 102        | 36         | 1.8 x less | 117
3   | 3       | 0.006433   | 1.3021     | 201 x more    | 0.005007   | 0.0008305  | 5.0 x less | 229        | 79         | 1.9 x less | 310
3   | 4       | 0.007125   | 2.5504     | 357 x more    | 0.005796   | 0.0008626  | 5.7 x less | 448        | 149        | 2.0 x less | 516
3   | 5       | 0.007424   | 4.4592     | 600 x more    | 0.006275   | 0.000861   | 6.3 x less | 767        | 251        | 2.1 x less | 822

4   | 1       | 0.01081    | 0.3098     | 28 x more     | 0.006394   | 0.0007032  | 8.1 x less | 71         | 20         | 2.5 x less | 53
4   | 2       | 0.007201   | 1.5558     | 215 x more    | 0.008119   | 0.0007251  | 10 x less  | 349        | 92         | 2.8 x less | 209
4   | 3       | 0.007502   | 5.491      | 731 x more    | 0.007367   | 0.0008973  | 7.2 x less | 1239       | 310        | 3.0 x less | 848
4   | 4       | 0.009323   | 13.3025    | 1426 x more   | 0.01137    | 0.001002   | 10 x less  | 2882       | 713        | 3.0 x less | 1282
4   | 5       | 0.01223    | 27.3097    | 2232 x more   | 0.01822    | 0.00138    | 12 x less  | 5790       | 1417       | 3.1 x less | 1621

5   | 1       | 0.01036    | 0.6624     | 63 x more     | 0.006455   | 0.0007832  | 7.2 x less | 188        | 40         | 3.7 x less | 115
5   | 2       | 0.007524   | 4.7011     | 624 x more    | 0.007443   | 0.0008885  | 7.4 x less | 1333       | 274        | 3.9 x less | 716
5   | 3       | 0.01195    | 21.4938    | 1798 x more   | 0.01708    | 0.001224   | 13 x less  | 5825       | 1164       | 4.0 x less | 1355
5   | 4       | 0.02044    | 67.563     | 3304 x more   | 0.04303    | 0.002114   | 19 x less  | 17079      | 3395       | 4.0 x less | 1651

5   | 5       | 0.04125    | 169.8522   | 4116 x more   | 0.102      | 0.003819   | 26 x less  | 40348      | 7978       | 4.1 x less | 1729